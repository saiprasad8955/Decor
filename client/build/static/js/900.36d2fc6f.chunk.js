"use strict";(self.webpackChunk_minimal_kit_simple_cra_js=self.webpackChunk_minimal_kit_simple_cra_js||[]).push([[900],{70786:function(e,n,r){r.d(n,{Z:function(){return a}});var t=r(36314),i=r(4567),s=r(13838),l=r(52115),o=r(80184);function a(e){var n=e.open,r=e.onClose,a=e.onConfirm,c=e.title,d=void 0===c?"Delete Item?":c,u=e.description,h=void 0===u?"This action cannot be undone.":u;return(0,o.jsx)(l.Z,{open:n,onClose:r,arrow:"top-right",children:(0,o.jsxs)(t.Z,{spacing:2,sx:{p:2,minWidth:240},children:[(0,o.jsx)(i.Z,{variant:"subtitle1",children:d}),(0,o.jsx)(i.Z,{variant:"body2",color:"text.secondary",children:h}),(0,o.jsxs)(t.Z,{direction:"row",spacing:1,justifyContent:"flex-end",children:[(0,o.jsx)(s.Z,{size:"small",onClick:r,children:"Cancel"}),(0,o.jsx)(s.Z,{size:"small",color:"error",variant:"contained",onClick:a,children:"Delete"})]})]})})}},1427:function(e,n,r){r.d(n,{Z:function(){return c}});var t=r(46128),i=r(697),s=r(4567),l=r(13400),o=r(29823),a=r(80184);function c(e){var n=e.open,r=e.onClose,c=e.title,d=e.children;return console.log("\ud83d\ude80 ~ MasterDrawer ~ title:",c),(0,a.jsx)(t.ZP,{anchor:"right",open:n,onClose:r,children:(0,a.jsxs)(i.Z,{sx:{width:{xs:300,sm:c.includes("Invoice")?1e3:600},p:3},children:[(0,a.jsxs)(i.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsx)(s.Z,{variant:"h6",children:c}),(0,a.jsx)(l.Z,{onClick:r,children:(0,a.jsx)(o.Z,{})})]}),(0,a.jsx)(i.Z,{mt:3,children:d})]})})}},34900:function(e,n,r){r.r(n),r.d(n,{default:function(){return M}});var t=r(6907),i=r(74165),s=r(93433),l=r(15861),o=r(29439),a=r(72791),c=r(81766),d=r(13092),u=r(36314),h=r(4567),m=r(13838),x=r(89164),Z=r(27938),j=r(13239),p=r(79836),f=r(56890),v=r(9195),b=r(68745),C=r(53382),g=r(13400),y=r(38820),k=r(5397),w=r(99615),_=r(70786),A=r(57088),S=r(1427),N=r(1413),D=r(8007),P=r(61134),T=r(44695),I=r(697),W=r(48550),q=r(80184),H=D.Ry().shape({name:D.Z_().required("Name is required"),number:D.Z_().required("Number is required").matches(/^\d{10}$/,"Number must be digits and exactly 10 digits"),email:D.Z_().email("Invalid email").nullable(),address:D.Z_().nullable()});function F(e){var n,r,t,i,s=e.initialData,l=void 0===s?{}:s,o=e.onSubmit,a=e.onClose,c=(0,P.cI)({resolver:(0,T.X)(H),defaultValues:{name:l.name||"",number:l.number||"",email:l.email||"",address:l.address||""}}),d=c.register,h=c.handleSubmit,x=c.reset,Z=c.formState.errors;return(0,q.jsx)(I.Z,{component:"form",onSubmit:h((function(e){o(e),x(),a()})),children:(0,q.jsxs)(u.Z,{spacing:2,children:[(0,q.jsx)(W.Z,(0,N.Z)((0,N.Z)({label:"Name"},d("name")),{},{error:!!Z.name,helperText:null===(n=Z.name)||void 0===n?void 0:n.message,fullWidth:!0})),(0,q.jsx)(W.Z,(0,N.Z)((0,N.Z)({label:"Mobile Number"},d("number")),{},{error:!!Z.number,helperText:null===(r=Z.number)||void 0===r?void 0:r.message,fullWidth:!0})),(0,q.jsx)(W.Z,(0,N.Z)((0,N.Z)({label:"Email"},d("email")),{},{error:!!Z.email,helperText:null===(t=Z.email)||void 0===t?void 0:t.message,fullWidth:!0})),(0,q.jsx)(W.Z,(0,N.Z)((0,N.Z)({label:"Address"},d("address")),{},{error:!!Z.address,helperText:null===(i=Z.address)||void 0===i?void 0:i.message,fullWidth:!0,multiline:!0,rows:2})),(0,q.jsx)(I.Z,{textAlign:"right",children:(0,q.jsx)(m.Z,{type:"submit",variant:"contained",children:null!==l&&void 0!==l&&l.name?"Update":"Add"})})]})})}var z=function(e){return w.ZP.get(e).then((function(e){return e.data}))};function E(){var e=(0,A.K$)(),n=(0,a.useState)(!1),r=(0,o.Z)(n,2),t=r[0],N=r[1],D=(0,a.useState)(null),P=(0,o.Z)(D,2),T=P[0],I=P[1],W=(0,a.useState)(null),H=(0,o.Z)(W,2),E=H[0],M=H[1],U=(0,a.useState)(null),$=(0,o.Z)(U,2),K=$[0],L=$[1],O=function(){M(null),L(null)},R=(0,c.ZP)(w.Hv.customer.list,z),V=R.data,X=R.error,B=R.isLoading,G=(0,a.useCallback)((function(){I(null),N(!0)}),[]);console.log({selectedCustomerId:K});var J=(0,a.useCallback)(function(){var e=(0,l.Z)((0,i.Z)().mark((function e(n){var r,t,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!T){e.next=10;break}return e.next=4,w.ZP.put("/customer/update/".concat(T._id),n);case 4:r=e.sent,console.log(r.data),t=V.map((function(e){return e._id===T._id?r.data:e})),(0,d.j)(w.Hv.customer.list,t,!1),e.next=15;break;case 10:return e.next=12,w.ZP.post("/customer/add",n);case 12:r=e.sent,l=[].concat((0,s.Z)(V),[r.data]),(0,d.j)(w.Hv.customer.list,l,!1);case 15:N(!1),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error("Failed to save customer:",e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(n){return e.apply(this,arguments)}}(),[V,T]),Q=(0,a.useCallback)(function(){var e=(0,l.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.ZP.delete("/customer/delete/".concat(n));case 3:r=V.filter((function(e){return e._id!==n})),console.log("\ud83d\ude80 ~ updatedCustomers:",r),(0,d.j)(w.Hv.customer.list),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Failed to save customer:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),[V]);return X?(0,q.jsxs)("div",{style:{width:"100%",justifyContent:"center"},children:[(0,q.jsxs)(u.Z,{direction:"row",justifyContent:"space-between",mb:3,children:[(0,q.jsx)(h.Z,{variant:"h4",children:"Customers"}),(0,q.jsx)(m.Z,{variant:"contained",onClick:G,children:"Add Customer"})]}),(0,q.jsx)("p",{style:{color:"red",fontSize:20,textAlign:"center",paddingTop:"150px"},children:"Failed to load customers!"})]}):(0,q.jsxs)(x.Z,{maxWidth:!e.themeStretch&&"xl",children:[(0,q.jsxs)(u.Z,{direction:"row",justifyContent:"space-between",mb:3,children:[(0,q.jsx)(h.Z,{variant:"h4",children:"Customers"}),(0,q.jsx)(m.Z,{variant:"contained",onClick:G,children:"Add Customer"})]}),(0,q.jsx)(Z.Z,{sx:{width:"100%",overflow:"auto"},children:B?(0,q.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"20px"},children:(0,q.jsx)(j.Z,{})}):(0,q.jsxs)(p.Z,{children:[(0,q.jsx)(f.Z,{children:(0,q.jsxs)(v.Z,{children:[(0,q.jsx)(b.Z,{children:"Name"}),(0,q.jsx)(b.Z,{children:"Email"}),(0,q.jsx)(b.Z,{children:"Number"}),(0,q.jsx)(b.Z,{children:"Address"}),(0,q.jsx)(b.Z,{align:"right",children:"Actions"})]})}),(0,q.jsx)(C.Z,{children:V&&V.length>0?V.map((function(e){return(0,q.jsxs)(v.Z,{children:[(0,q.jsx)(b.Z,{children:e.name}),(0,q.jsx)(b.Z,{children:e.email||"N/A"}),(0,q.jsxs)(b.Z,{children:["+91 ",e.number]}),(0,q.jsx)(b.Z,{children:e.address||"N/A"}),(0,q.jsxs)(b.Z,{align:"right",children:[(0,q.jsx)(g.Z,{color:"primary",onClick:function(){I(e),N(!0)},children:(0,q.jsx)(y.Z,{})}),(0,q.jsx)(g.Z,{color:"error",onClick:function(n){return r=n,t=e._id,console.log("\ud83d\ude80 ~ handleOpenDeletePopover ~ id:",t),M(r.currentTarget),void L(t);var r,t},children:(0,q.jsx)(k.Z,{})})]})]},e._id)})):(0,q.jsx)(v.Z,{children:(0,q.jsx)(b.Z,{colSpan:5,align:"center",sx:{py:4},children:(0,q.jsxs)(h.Z,{variant:"body1",color:"text.secondary",children:["No customers found. Head towards ",(0,q.jsx)("strong",{children:"Add Customer"})," to add them."]})})})})]})}),(0,q.jsx)(S.Z,{open:t,onClose:function(){return N(!1)},title:T?"Update Customer":"Add Customer",children:(0,q.jsx)(F,{initialData:T||{},onSubmit:J,onClose:function(){return N(!1)}})}),(0,q.jsx)(_.Z,{open:E,onClose:O,onConfirm:function(){Q(K),O()},title:"Delete Customer?",description:"Are you sure you want to delete this customer?"})]})}function M(){return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(t.ql,{children:(0,q.jsx)("title",{children:" Dashboard: Customer"})}),(0,q.jsx)(E,{})]})}}}]);
//# sourceMappingURL=900.36d2fc6f.chunk.js.map